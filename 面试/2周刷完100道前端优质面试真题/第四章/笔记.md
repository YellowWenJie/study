# 前端基础知识

![image-20220728130528014](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mk5cd62dj21bu0qydhb.jpg)

![image-20220728130608024](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mk6ecuusj21bi0nijsn.jpg)

![image-20220728143423297](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mmpu6o78j21bu0qydhy.jpg)

## 请说明 Ajax Fetch Axios 三者的区别

> ##### 三者都用于网络请求，但是不同维度
>
> * Ajax（ Asyncchronous Javascript and ）（异步的JavaScript和XML），一种技术统称
>   * 能通过一些技术实现网络请求，就叫 Ajax
> * Fetch，一个具体的 API
>   * 浏览器原生 API，用于网络请求
>   * 和 XMLHttpRequest 一个级别
>   * Fetch 语法更加简洁、易用、支持 Promise
> * Axios，第三方库
>   * 最常用的网络请求库（随着 Vue 火爆起来的）
>   * 内部可用 XMLHttpRequest 和 Fetch 实现

> ##### 答案：
>
> * Ajax，一种技术统称
> * Fetch，一个原生 API
> * Axios，一个第三方库

> ##### 划重点
>
> * lib 和 API 的区别
> * 实际开发中，使用现成的 lib，尽量不要自己造轮子

### 面试题：用 XMLHttpRequest 实现 Ajax

```js
function ajax(url, successFn) {
  const xhr = new XMLHttpRequest()

  xhr.open('GET', url, false)
  xhr.onreadystatechange = function () {
    if (xhr.readyState == 4 && xhr.status == 200) {
      successFn(xhr.responseText)
    }
  }
  xhr.send(null)
}
```

## 节流和防抖

> * 两者有什么区别
> * 分别用于什么场景

> ##### 防抖
>
> * 防抖，防止抖动 ”你先抖动着，啥时候停了，再执行下一步“
> * 例如，一个搜索输入框，等输入停止之后，再触发搜索
>
> ![image-20220728151306522](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mnu52fdpj21bu0qyad8.jpg)
>
> ```js
> function debounce(fn, delay = 200) {
>   let timer = 0
>   return function () {
>     if (timer) clearTimeout(timer)
>     timer = setTimeout(() => {
>       fn.apply(this, arguments)
>     }, delay)
>   }
> }
> ```

> ##### 节流
>
> * 节流，节省交互沟通。流，不一定指流量
> * “别急，一个一个来，按时间节奏来，插队者无效”
> * 例如，[drag](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Global_attributes/draggable) 或 scroll 期间触发某个回调，要设置一个时间间隔
>
> ![image-20220728152650940](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mo8fhkrqj21bu0qyjux.jpg)
>
> ```js
> function throttle(fn, delay = 100) {
>   let timer = 0
> 
>   return function () {
>     if (timer) return
> 
>     timer = setTimeout(() => {
>       fn.apply(this, arguments)
>       timer = 0
>     }, delay)
>   }
>   }
> ```

![image-20220728152913536](https://tva1.sinaimg.cn/large/e6c9d24egy1h4moawc6fxj21bu0qy40l.jpg)

![image-20220728152949225](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mobirrvpj21bu0qy0ue.jpg)

## px % em rem vw/vh 有什么区别

> ##### px 和 %
>
> * px 基本单位，绝对定位（其他的都是相对单位）
> * % 相对于父元素的宽度比例

> ##### em 和 rem
>
> * em 相对于当前元素的 font-size
>
> * rem 相对于根节点的 font-size

> ##### vw/vh
>
> * vw 屏幕宽度的 1%
> * vh 屏幕高度的 1%
> * vmin 俩者最小值，vmax 俩者最大值

## 箭头函数

* 箭头函数有什么缺点

  * 没有 argument
  * 无法通过 apply call bind 改变 this

* 什么时候不能使用箭头函数

  * ![image-20220728155112493](https://tva1.sinaimg.cn/large/e6c9d24egy1h4moxrvj9tj20vc0lidhg.jpg)

  * ![image-20220728155158389](https://tva1.sinaimg.cn/large/e6c9d24egy1h4moykfyokj20ry0ks0ue.jpg)

  * ![image-20220728155217179](https://tva1.sinaimg.cn/large/e6c9d24egy1h4moyw35fdj21bu0qy0v4.jpg)

  * ![image-20220728155314840](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mozw1a0kj212g0j0wgz.jpg)

  * ![image-20220728155357339](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mp0mxa2dj21bu0qy41q.jpg)

    > ###### react 组件的生命周期(非 hooks)行。因为它本质上是一个 class

![image-20220728155817902](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mp55ces2j21bu0qydhz.jpg)

![image-20220728155937257](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mp6jfi6rj21bi0n4tac.jpg)

## 请描述 TCP 三次握手和四次挥手

> ###### 建立 TCP 连接
>
> * 先建立连接（确保双方都有收发消息的能力）
> * 再传输内容（如发送一个 get 请求）
> * 网络连接是 TCP 协议，传输内容是 HTTP 协议

> ###### 三次握手
>
> * Client 发包，Server 接收。Server：有 Client 要找我
>
> * Server 发包，Client 接收。Client 已经收到信息了
>
> * Client 发包，Server 接收。Server：Client 要准备发送了
>
>   ![image-20220728161240300](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mpk3uea8j21bu0qyq5q.jpg)

> ##### 四次挥手
>
> * Client 发包，Server 接收。Server：Client 已请求结束
>
> * Server 发包，Client 接收。Client：Server 已收到，我等待它关闭
>
> * Server 发包，Client 接收。Client：Server 此时可以关闭连接了
>
> * Client 发包，Server 接收，Server：可以关闭了（然后关闭连接）
>
>   ![image-20220728162100706](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mpss3zlvj21bu0qy41b.jpg)

## for…in 和 for…of 有什么区别

> * 遍历对象：for…in 可以，for…of 不可以
> * 遍历 Map Set：for…of 可以，for…in 不可以
> * 遍历 gennerater：for…of 可以，for…in 不可以

![image-20220728163841527](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mqb6k9ywj21bu0qy0us.jpg)

![image-20220728163854889](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mqbet28pj21bu0qygnk.jpg)

### 连环问：for await …of 有什么作用？

> * for await …of 遍历多个 Promise

## offsetHeight scrollHeight clientHeight 区别

![image-20220728170116006](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mqynyo6mj21be0ni758.jpg)

![image-20220728170527182](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mr30te5bj21bu0qyq53.jpg)

## HTMLCollection 和 NodeList 区别

> ##### Node 和 Element
>
> * DOM 是一棵树，所有节点都是 Node
> * Node 是 Element 的基类
> * Element 是其他 HTML 元素的基类，如 HTMLDivElement
>
> ![image-20220728190706096](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mulle89kj21bu0qy40w.jpg)
>
> * HTMLCollection 是 Element 集合
> * NodeList 是 Node 集合

![image-20220728193639661](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mvgcpjf3j21bu0qywgi.jpg)

> <div style="color:red">childNodes属性返回所有的节点，包括文本节点、注释节点； children属性只返回元素节点； 使用children属性返回元素的子元素的集合。 即：HTMLCollection对象</div>

### 扩展：类数组 -> 数组

![image-20220728193839877](https://tva1.sinaimg.cn/large/e6c9d24egy1h4mvifmytej21bu0qydit.jpg)

## Vue computed 和 watch 区别

* computed 用于计算新的数据
* watch 用于监听现有数据

> ##### computed 有缓存
>
> ##### method 没有缓存

#### 答案：

> * computed 用于计算产出新的数据，有缓存
> * watch 用于监听现有数据

## Vue 组件通讯有几种方式，尽量全面

> ##### Vue 组件通讯的方式
>
> * props 和 $emit
>
> > ###### 适合父子组件
>
> * 自定义事件（全局事件总线）
>
> > ###### 适合俩个不相关的组件
> >
> > * Vue2：new Vue() => event
> >
> > > 用完要 off掉，卸载前
> >
> > * Vue3：引入第三方库
>
> * $attrs
>
>   > * `$attrs`和`$listeners`,`$listeners`在 vue3 中被移除了
>   > * `$attrs`传属性，`$listeners`传方法
>
> * $parent
>
>   > ###### 可以直接获取父节点的属性和方法
>
> * $refs
>
> > ###### 可以访问子组件的属性和方法
>
> * provide/inject
>
>   > [vue中provide和inject 用法 - 掘金 (juejin.cn)](https://juejin.cn/post/7044423805191585805)
>
> * Vuex

> ##### 不同场景
>
> * 父子组件
> * 上下级组件（跨多级）通讯
> * 全局组件

## Vuex mutation action 区别

* ###### mutation：原子操作；必须同步代码

> 所谓原子操作是指不会被线程调度机制打断的操作；这种操作一旦开始，就一直运行到结束，中间不会有任何context switch （切换到另一个线程）。 当然JS是单线程的，所以不存在线程打断这么一说，我只是从Java中借引了这么一个概念。

* ###### action：可包含多个 mutation；可包含异步代码；

## JS 严格模式有什么特点

![image-20220728225920613](https://tva1.sinaimg.cn/large/e6c9d24egy1h4n1bbavs8j21bu0qy0uo.jpg)

### 特点

> * ###### 全局变量必须先声明
>
>   > ![image-20220728230223161](https://tva1.sinaimg.cn/large/e6c9d24egy1h4n1efmahnj21bu0qyjt9.jpg)
>
> * ###### 禁止使用 with
>
> > ![image-20220728230320053](https://tva1.sinaimg.cn/large/e6c9d24egy1h4n1ff0jn4j21bu0qymzj.jpg)
>
> * ###### 创建 eval 作用域
>
> > ![image-20220728230451682](https://tva1.sinaimg.cn/large/e6c9d24egy1h4n1h0av8kj21bu0qyac9.jpg)
>
> * ###### 禁止 this 指向 window
>
> > ![image-20220728230730663](https://tva1.sinaimg.cn/large/e6c9d24egy1h4n1jrh35oj21bu0qydi0.jpg)
>
> * ###### 函数参数不能重名
>
> > ![image-20220728230918850](https://tva1.sinaimg.cn/large/e6c9d24egy1h4n1ln2rpwj21bu0qyq5b.jpg)

![image-20220728231045123](https://tva1.sinaimg.cn/large/e6c9d24egy1h4n1n4ojcxj21bu0qy409.jpg)

## HTTP 跨域请求时为何发生 options 请求

### 跨域请求

> * 浏览器同源策略
> * 同源策略一般限制 Ajax 网络请求，不能跨域请求 server
> * 不会限制 `<link> <img> <script> <iframe>`加载第三方资源

![image-20220728231620472](https://tva1.sinaimg.cn/large/e6c9d24egy1h4n1sybj9tj21bu0qytbw.jpg)

> ```js
> // server
> 
> const http = require('http')
> const app = http.createServer((req,res) => {
>   try {
>     const callback = req.url.split('=')[1]
>     res.statusCode = 200
>     res.end(`${callback}({"data":"hello world"})`)
>   } catch (error) {
>     console.error(error.message)
>   }
> })
> app.listen('5001',()=>{
>   console.log('http://127.0.0.01:5001')
> })
> ```
>
> ```js
> // client
> <!DOCTYPE html>
> <html lang="en">
>   <head>
>     <meta charset="UTF-8" />
>     <meta http-equiv="X-UA-Compatible" content="IE=edge" />
>     <meta name="viewport" content="width=device-width, initial-scale=1.0" />
>     <title>Document</title>
>   </head>
>   <body>
>     <div id="div"></div>
>     <script>
>       const div = document.querySelector('#div')
> 
>       const jsonp = function (data) {
>         div.appendChild(document.createElement('div')).innerText = data.data
>       }
>     </script>
>     <script src="http://127.0.0.01:5001?callback=jsonp"></script>
>   </body>
> </html>
> ```

![image-20220729113325341](https://tva1.sinaimg.cn/large/e6c9d24egy1h4nn3uheztj21bu0qygp2.jpg)

![image-20220729113446564](https://tva1.sinaimg.cn/large/e6c9d24egy1h4nn595r74j21bu0qyadl.jpg)

![image-20220729113618772](https://tva1.sinaimg.cn/large/e6c9d24egy1h4nn6upwg2j21bu0qy40d.jpg)







